# 1장 사용자 수에 따른 규모 확장성

## 단일 서버
## 데이터베이스
- 어떤 데이터베이스를 사용할것인가?:
  - 지연시간
  - 비정형 여부
  - 직렬화만 필요한지
  - 아주 많은 양의 데이터를 저장할 필요가 있는지

## 수직적 규모 확장 vs 수평적 규모 확장
- 수직적 규모 확장에는 한계가 있다.
- 수직적 규모 확장은 장애에 대한 자동복구 방안이나 다중화 방안을 제시하지 않는다.
- 로드밸런서:
  - Proxy Mode vs DSR Mode
  - Client Side Load Balancing, Server Side Load Balancing
  - Sticky Session
  - L4 vs L7
  - L7 LB, TLS
  - Internal Network 에서 HTTP vs HTTPS
- 데이터베이스 다중화:
  - Spring 에서 DataSource 를사용하는 방법

## 캐시
- 캐시 계층:
  - HTTP Cache 관련되 내용:
    - Nginx level 에서 Cache 하는게 맞는지 아닌지
    - Cache-Control 과 Expires 헤더
  - CDN은 어떻게 동작하는가:
    - Static Cache vs Dynamic Cache
    - anycast

## 무상태 웹 계층
- 상태 정보 의존적인 아키텍처:
  - 운영 경험이 있는지 질문
  - k8s 환경인지, vm 환경인지
  - 어떻게 배포하는지

## 데이터 센터
## 메시지 큐
- 메시지 큐를 사용하는 이유:
  - 비동기 처리
  - 왜 비동기 처리를 해야하는가

## 로그, 메트릭 그리고 자동화
- 로그, 메트릭의 정의
- 사용해본 로그와 메트릭 시스템
- 모니터링 경험, 그라파나 데시보드 구성해본 경험이 있는지

## 데이터베이스의 규모 확장
- 수직적 확장
- 수평적 확장

## 정리
- 웹 계층은 무상태 계층으로
- 모든 계층에 다중화 도입
- 가능한 한 만은 데이터를 캐시할 것
- 여러 데이터 센터를 지원할 것
- 정적 콘텐츠는 CDN을 통해 서비스할 것
- 데이터 계층은 샤딩을 통해 그 규모를 확장할 것
- 각 계층은 독립적 서비스로 분할할 것
- 시스템을 지속적으로 모니터링하고, 자동화 도구들을 활용할 것
